<!-- components/popups.html -->

<!-- Popup הגדרות API -->
<div id="api-settings-popup" class="settings-popup-overlay">
    <div class="settings-popup">
        <div class="popup-header">
            <h3><i class="fas fa-cog"></i> הגדרות API</h3>
            <button id="close-settings-popup" class="close-popup-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="popup-content">
            <div class="api-section" style="margin-bottom: 2rem;">
                <h4>מצב תמלול:</h4>
                <label for="transcription-mode">בחר כיצד יבוצע התמלול:</label>
                <span class="tooltip-icon">
                    <i class="fas fa-info-circle"></i>
                    <span class="tooltip-text">
                        <strong>OpenAI Whisper:</strong> תמלול מדויק באיכות גבוהה<br>
                        <strong>Hugging Face:</strong> תמלול חינמי בסיסי<br>
                        <strong>Groq:</strong> תמלול מהיר עם Whisper<br>
                        <strong>Google Gemini:</strong> תמלול וניתוח חכם<br>
                        <strong>Anthropic Claude:</strong> תמלול עם הבנה מתקדמת
                    </span>
                </span>
                <select id="transcription-mode" class="styled-select">
                    <option value="openai" selected>OpenAI Whisper – תמלול מדויק</option>
                    <option value="huggingface">Hugging Face – תמלול חינמי</option>
                    <option value="groq">Groq – תמלול מהיר</option>
                    <option value="gemini">Google Gemini – תמלול חכם</option>
                    <option value="claude">Anthropic Claude – תמלול מתקדם</option>
                </select>

                <div class="provider-capabilities" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-size: 14px;">
                    <div class="capability-legend">
                        <h5 style="margin: 0 0 12px 0; color: #495057; font-size: 15px;">יכולות כל ספק:</h5>
                        <div class="capability-grid">
                            <div class="capability-item">
                                <div class="capability-header">🎙️ <strong>תמלול אודיו:</strong></div>
                                <div class="capability-list">OpenAI, Hugging Face, Groq, Gemini, Claude</div>
                            </div>
                            <div class="capability-item">
                                <div class="capability-header">✏️ <strong>הגהה וסיכום:</strong></div>
                                <div class="capability-list">OpenAI, Groq, Gemini, Claude</div>
                            </div>
                            <div class="capability-item">
                                <div class="capability-header">⚡ <strong>מהירות גבוהה:</strong></div>
                                <div class="capability-list">Groq (הכי מהיר)</div>
                            </div>
                            <div class="capability-item">
                                <div class="capability-header">🆓 <strong>חינמי:</strong></div>
                                <div class="capability-list">Hugging Face</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- חלק חובה - OpenAI -->
            <div class="api-section required">
                <h4>OpenAI Whisper – תמלול מדויק בעזרת AI מתקדם <span class="recommended-badge">מומלץ</span></h4>
                <label for="openai-api-key">מפתח API של OpenAI</label>
                <p class="api-description">נדרש לתמלול באיכות גבוהה עם Whisper API. ניתן לקבל מפתח באתר <a href="https://platform.openai.com" target="_blank">platform.openai.com</a></p>
                <div class="api-input-group">
                    <input type="password" id="openai-api-key" placeholder="הדבק את מפתח ה-API של OpenAI כאן">
                    <button id="save-openai-key" class="btn"><i class="fas fa-save"></i> שמור</button>
                </div>
                <div style="margin-top: 10px;">
                    <input type="checkbox" id="show-openai-key" style="margin-left: 8px;">
                    <label for="show-openai-key">הצג/הסתר מפתח API</label>
                </div>
                <div id="openai-key-status" class="api-key-status"></div>
                <div class="api-help-icon" id="openai-help-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
            </div>

            <!-- Toggle לאפשרויות נוספות -->
            <div class="additional-options-toggle">
                <button id="toggle-additional-options" class="toggle-additional-btn">
                    <i class="fas fa-plus"></i>
                    <span>הצג אפשרויות נוספות (אופציונלי)</span>
                    <i class="fas fa-chevron-down toggle-arrow"></i>
                </button>
            </div>

            <!-- אפשרויות נוספות - מוסתרות בברירת מחדל -->
            <div id="additional-options" class="additional-options" style="display: none;">
                <!-- Hugging Face -->
                <div class="api-section optional">
                    <h4>Hugging Face – תמלול חינמי <span class="optional-badge">אופציונלי</span></h4>
                    <label for="huggingface-api-key">מפתח API של Hugging Face</label>
                    <p class="api-description">עבור תמלול חינמי עם מודלי Hugging Face. ניתן לקבל מפתח באתר <a href="https://huggingface.co/settings/tokens" target="_blank">huggingface.co</a></p>
                    <div class="api-input-group">
                        <input type="password" id="huggingface-api-key" placeholder="הדבק את מפתח ה-API של Hugging Face כאן">
                        <button id="save-huggingface-key" class="btn"><i class="fas fa-save"></i> שמור</button>
                    </div>
                    <div style="margin-top: 10px;">
                        <input type="checkbox" id="show-huggingface-key" style="margin-left: 8px;">
                        <label for="show-huggingface-key">הצג/הסתר מפתח API</label>
                    </div>
                    <div id="huggingface-key-status" class="api-key-status"></div>
                    <div class="api-help-icon" id="huggingface-help-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                </div>

                <!-- Groq -->
                <div class="api-section optional">
                    <h4>Groq – תמלול והגהה מהירים <span class="optional-badge">אופציונלי</span></h4>
                    <label for="groq-api-key">מפתח API של Groq</label>
                    <p class="api-description">לתמלול מהיר עם Whisper ויכולות הגהה וסיכום חכמה מבוססי AI. ניתן לקבל מפתח באתר <a href="https://groq.com" target="_blank">groq.com</a></p>
                    <div class="api-input-group">
                        <input type="password" id="groq-api-key" placeholder="הדבק את מפתח ה-API של Groq כאן">
                        <button id="save-groq-key" class="btn"><i class="fas fa-save"></i> שמור</button>
                    </div>
                    <div style="margin-top: 10px;">
                        <input type="checkbox" id="show-groq-key" style="margin-left: 8px;">
                        <label for="show-groq-key">הצג/הסתר מפתח API</label>
                    </div>
                    <div id="groq-key-status" class="api-key-status"></div>
                    <div class="api-help-icon" id="groq-help-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                </div>

                <!-- Gemini -->
                <div class="api-section optional">
                    <h4>Google Gemini – תמלול ועיבוד חכם <span class="optional-badge">אופציונלי</span></h4>
                    <label for="gemini-api-key">מפתח API של Google Gemini</label>
                    <p class="api-description">עבור תמלול מתקדם עם יכולות ניתוח, הגהה וסיכום. ניתן לקבל מפתח באתר <a href="https://ai.google.dev/" target="_blank">ai.google.dev</a></p>
                    <div class="api-input-group">
                        <input type="password" id="gemini-api-key" placeholder="הדבק את מפתח ה-API של Gemini כאן">
                        <button id="save-gemini-key" class="btn"><i class="fas fa-save"></i> שמור</button>
                    </div>
                    <div style="margin-top: 10px;">
                        <input type="checkbox" id="show-gemini-key" style="margin-left: 8px;">
                        <label for="show-gemini-key">הצג/הסתר מפתח API</label>
                    </div>
                    <div id="gemini-key-status" class="api-key-status"></div>
                    <div class="api-help-icon" id="gemini-help-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                </div>

                <!-- Anthropic -->
                <div class="api-section optional">
                    <h4>Anthropic Claude – הגהה וסיכום מתקדמים <span class="optional-badge">אופציונלי</span></h4>
                    <label for="anthropic-api-key">מפתח API של Anthropic</label>
                    <p class="api-description">עבור הגהה וסיכום באיכות גבוהה עם Claude. לא תומך בתמלול ישיר. ניתן לקבל מפתח באתר <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a></p>
                    <div class="api-input-group">
                        <input type="password" id="anthropic-api-key" placeholder="הדבק את מפתח ה-API של Anthropic כאן">
                        <button id="save-anthropic-key" class="btn"><i class="fas fa-save"></i> שמור</button>
                    </div>
                    <div style="margin-top: 10px;">
                        <input type="checkbox" id="show-anthropic-key" style="margin-left: 8px;">
                        <label for="show-anthropic-key">הצג/הסתר מפתח API</label>
                    </div>
                    <div id="anthropic-key-status" class="api-key-status"></div>
                    <div class="api-help-icon" id="anthropic-help-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Popup תמלולים אחרונים -->
<div id="recent-transcriptions-popup" class="transcriptions-popup-overlay">
    <div class="transcriptions-popup">
        <div class="popup-header">
            <h3><i class="fas fa-history"></i> תמלולים אחרונים</h3>
            <button id="close-transcriptions-popup" class="close-popup-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="popup-content">
            <div id="recent-transcriptions-list" class="transcriptions-list">
                <!-- תמלולים יתווספו כאן דינמית -->
            </div>

            <div class="popup-actions">
                <button id="clear-all-transcriptions" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> מחק הכל
                </button>
            </div>
        </div>
    </div>
</div>

<!-- פופאפ סטטיסטיקות מפורט -->
<div id="detailed-stats-popup" class="transcriptions-popup-overlay">
    <div class="transcriptions-popup">
        <div class="popup-header">
            <h3><i class="fas fa-chart-bar"></i> סטטיסטיקות תמלול מפורטות</h3>
            <button id="close-detailed-stats" class="close-popup-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="popup-content">
            <div id="detailed-stats-content">
                <!-- תוכן סטטיסטיקות מפורט יתווסף כאן -->
            </div>
        </div>
    </div>
</div>

<!-- הודעת אישור עלות -->
<div id="cost-confirmation-popup" class="cost-popup-overlay">
    <div class="cost-popup">
        <div class="popup-header">
            <h3><i class="fas fa-dollar-sign"></i> אישור עלות תמלול</h3>
        </div>

        <div class="popup-content">
            <div class="cost-details">
                <div class="file-info-cost">
                    <p><strong>שם הקובץ:</strong> <span id="cost-file-name"></span></p>
                    <p><strong>גודל הקובץ:</strong> <span id="cost-file-size"></span></p>
                </div>

                <div class="cost-breakdown">
                    <p><strong>זמן משוער לתמלול:</strong> <span id="cost-estimated-time"></span></p>
                    <p><strong>עלות משוערת:</strong></p>
                    <div class="cost-amounts">
                        <div class="cost-usd">$<span id="cost-usd">0.00</span></div>
                        <div class="cost-ils">(<span id="cost-ils">0.00</span> ₪)</div>
                    </div>
                </div>
            </div>

            <div class="popup-actions">
                <button id="confirm-transcription" class="btn btn-confirm">
                    <i class="fas fa-check"></i> אישור והמשך בתמלול
                </button>
                <button id="cancel-transcription" class="btn btn-cancel">
                    <i class="fas fa-times"></i> ביטול
                </button>
            </div>

            <div class="dont-show-again">
                <input type="checkbox" id="dont-show-cost-again">
                <label for="dont-show-cost-again">אל תציג הודעה זו שוב</label>
            </div>
        </div>
    </div>
</div>